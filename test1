section .data
section .text
extern printf
global special
; special function
special:
push ebp
mov ebp, esp
push dword [ebp+8]
push dword [ebp+12]
pop ecx
pop eax
add eax, ecx
push eax
pop eax
pop ebp
ret
pop ebp
ret
global main
; main function
main:
push ebp
mov ebp, esp
lea ebx, [printf]
push ebx
pop ebx
mov dword [function_call_1], ebx
lea ebx, [special]
push ebx
pop ebx
mov dword [function_call_2], ebx
push dword 10
push dword 10
call [function_call_2]
add esp, 8
push eax
pop eax
push eax
mov eax, str_3
push eax
call [function_call_1]
add esp, 8
push eax
pop eax
push eax
add esp, 4
pop ebp
ret
section .data
function_call_1: dd 0
function_call_2: dd 0
section .rodata
str_3: db '%','i',10, 0
