section .data
section .text
extern printf
global set_dog
; set_dog function
set_dog:
push ebp
mov ebp, esp
sub esp, 32
push dword 50
push dword [ebp-4]
; INDIRECTION
pop ebx
push ebx
pop edx
pop eax
mov dword [edx], eax
lea ebx, [ebp-12]
push ebx
pop ebx
; STRUCTURE PUSH
push dword [ebx+8]
push dword [ebx+4]
push dword [ebx+0]
; END STRUCTURE PUSH
mov edx, [ebp+8]
pop eax
mov [edx+0], eax
pop eax
mov [edx+4], eax
pop eax
mov [edx+8], eax
mov eax, [ebp+8]
add esp, 32
pop ebp
ret
add esp, 32
pop ebp
ret
global main
; main function
main:
push ebp
mov ebp, esp
sub esp, 32
lea ebx, [set_dog]
push ebx
pop ebx
mov ecx, ebx
; SUBTRACT ROOM FOR RETURNED STRUCTURE/UNION DATATYPE
sub esp, 12
push esp
call ecx
add esp, 4
mov ebx, eax
; STRUCTURE PUSH
push dword [ebx+8]
push dword [ebx+4]
push dword [ebx+0]
; END STRUCTURE PUSH
; STRUCTURE PUSH
push dword [ebx+8]
push dword [ebx+4]
push dword [ebx+0]
; END STRUCTURE PUSH
add esp, 36
push dword [ebp-4]
; INDIRECTION
pop ebx
mov ebx, [ebx]
push ebx
pop eax
add esp, 32
pop ebp
ret
add esp, 32
pop ebp
ret
section .rodata
