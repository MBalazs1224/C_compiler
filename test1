section .data
section .text
extern printf
global func
; func function
func:
push ebp
mov ebp, esp
sub esp, 16
push dword 50
pop eax
mov dword [ebp-8], eax
lea ebx, [ebp-8]
push ebx
pop ebx
; STRUCTURE PUSH
push dword [ebx+4]
push dword [ebx+0]
; END STRUCTURE PUSH
mov edx, [ebp+8]
pop eax
mov [edx+0], eax
pop eax
mov [edx+4], eax
mov eax, [ebp+8]
add esp, 16
pop ebp
ret
add esp, 16
pop ebp
ret
global main
; main function
main:
push ebp
mov ebp, esp
sub esp, 16
lea ebx, [func]
push ebx
pop ebx
mov ecx, ebx
; SUBTRACT ROOM FOR RETURNED STRUCTURE/UNION DATATYPE
sub esp, 8
push esp
call ecx
add esp, 4
mov ebx, eax
; STRUCTURE PUSH
push dword [ebx+4]
push dword [ebx+0]
; END STRUCTURE PUSH
; STRUCTURE PUSH
push dword [ebx+4]
push dword [ebx+0]
; END STRUCTURE PUSH
pop eax
mov ddword [ebp-8], (null)
add esp, 20
push dword [ebp-8]
pop eax
push eax
pop eax
add esp, 16
pop ebp
ret
add esp, 16
pop ebp
ret
section .rodata
